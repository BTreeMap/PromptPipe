# PromptPipe environment configuration
# Copy this file to .env and edit as needed:
#   cp .env.example .env
#
# Precedence: CLI flags > environment variables (.env) > defaults
# See docs/configuration.md for the full reference.

# --- Core ---

# Base directory for SQLite files, debug logs, and lock file.
# Default: /var/lib/promptpipe
# PROMPTPIPE_STATE_DIR=/var/lib/promptpipe

# HTTP server listen address.
# Default: :8080
# API_ADDR=:8080

# --- Database ---

# Application database DSN (SQLite or PostgreSQL).
# Default: file:{STATE_DIR}/state.db?_foreign_keys=on
# DATABASE_DSN=file:/var/lib/promptpipe/state.db?_foreign_keys=on
# DATABASE_DSN=postgres://user:pass@localhost:5432/promptpipe?sslmode=disable

# Legacy fallback for DATABASE_DSN (used only when DATABASE_DSN is unset).
# DATABASE_URL=

# WhatsApp/whatsmeow session database DSN.
# Default: file:{STATE_DIR}/whatsmeow.db?_foreign_keys=on
# WHATSAPP_DB_DSN=file:/var/lib/promptpipe/whatsmeow.db?_foreign_keys=on

# --- GenAI (OpenAI) ---

# Required for conversation flow and genai prompts.
# OPENAI_API_KEY=

# OpenAI model name.
# Default: gpt-4o-mini
# GENAI_MODEL=gpt-4o-mini

# OpenAI temperature (0.0â€“1.0). Lower = more consistent.
# Default: 0.1
# GENAI_TEMPERATURE=0.1

# --- Scheduling ---

# Default cron string for /schedule when no schedule object is provided.
# Five-field format: minute hour day month weekday
# DEFAULT_SCHEDULE=

# Minutes before scheduled habit time to send preparation message.
# Default: 10
# SCHEDULER_PREP_TIME_MINUTES=10

# --- Conversation flow ---

# System prompt file paths.
# INTAKE_BOT_PROMPT_FILE=prompts/intake_bot_system.txt
# PROMPT_GENERATOR_PROMPT_FILE=prompts/prompt_generator_system.txt
# FEEDBACK_TRACKER_PROMPT_FILE=prompts/feedback_tracker_system.txt

# Number of history messages sent to bot tools (-1=unlimited, 0=none).
# Default: -1
# CHAT_HISTORY_LIMIT=-1

# Timeout for initial feedback response (e.g. "15m").
# Default: 15m
# FEEDBACK_INITIAL_TIMEOUT=15m

# Delay before follow-up feedback session (e.g. "3h").
# Default: 3h
# FEEDBACK_FOLLOWUP_DELAY=3h

# Auto-enter feedback mode after scheduled prompt inactivity.
# Default: true
# AUTO_FEEDBACK_AFTER_PROMPT_ENABLED=true

# Auto-enroll unknown phone numbers on first message.
# Default: false
# AUTO_ENROLL_NEW_USERS=false

# --- Debug ---

# Enable debug messages and GenAI call logging.
# Default: false
# PROMPTPIPE_DEBUG=false
